<script type="text/javascript">function buildQueryString(e,i,t,n){if("cat"===e&&0==$("#category_filter ul li span.active").length){var r=(c=document.location.href).split("/");r.pop();var a=r.join().replace(",","/");window.location.href=a}var c=document.location.href;c=c.split("&");var l=$.getQueryParameters();delete l[c[0]],delete l[e],delete l[t],""!=e&&""!=i&&(l[e]=i),""!=t&&""!=n&&(l[t]=n),""!=e&&""==i&&delete l[e],""!=t&&""==n&&delete l[e];var o=[];for(var f in l)jQuery.inArray(f,o)>0?delete l[f]:o.push(f),"cat"==e&&f.match(/cat/g)&&delete l[f],"brand"==e&&""==i&&f.match(/brand/g)&&delete l[f];if(l=={})p=c[0];else{var u=serialize(l),s=u.split("&"),h=s.length;console.log(h);for(var g="",d=h-1;d<h&&d>=0;d--)""!=u[d]&&(g+="&"+s[d],console.log(g));console.log(g);var p=c[0]+g}return p}function showMoreFilters(e){$("#doNotShowFilter-"+e).toggle("fast","swing"),$(".filterArrowUp-"+e).toggle("fast","swing"),$(".filterArrowDown-"+e).toggle("fast","swing"),$("#open-"+e).html("Prikaži manje"),$(".active-"+e).html("Prikaži sve"),$("#open-"+e).toggleClass("active-"+e)}jQuery.extend({getQueryParameters:function(e){return(e||document.location.href).replace(/(^\?)/,"").split("&").map(function(e){return e=e.split("="),this[e[0]]=e[1],this}.bind({}))[0]}}),serialize=function(e,i){var t=[];for(var n in e)if(e.hasOwnProperty(n)){var r=i?i+"["+n+"]":n,a=e[n];t.push("object"==typeof a?serialize(a,r):r+"="+a)}return t.join("&")},$(document).ready(function(){$("#po_strani").change(function(){var e=buildQueryString("po_strani",$(this).val(),"page","1");window.location.href=e}),$("#sortiranje").change(function(){var e=buildQueryString("sortiranje",$(this).val(),"","");window.location.href=e}),$(".pagination").click(function(){var e=buildQueryString("page",$(this).data("page"),"","");window.location.href=e}),$("#priceChange").click(function(){var e=$("#minPrice").val(),i=$("#maxPrice").val();if(e>i){i=1,console.log(e+" !!1 "+i);t=buildQueryString("min_cena",e,"max_cena",i);window.location.href=t}else if(e>0&&i<1){i=1,console.log(e+" !!2 "+i);t=buildQueryString("min_cena",e,"max_cena",i);window.location.href=t}else if(e<1&&i>0){e=1,console.log(e+" !!3 "+i);t=buildQueryString("max_cena",i,"max_cena",i);window.location.href=t}else if(e>0&&i>0){console.log(e+" !!4 "+i);var t=buildQueryString("min_cena",e,"max_cena",i);window.location.href=t}});$(".filters").width();$(".checkClick.brand").click(function(){var e="";if($(".checkClick.brand.active").each(function(i){e=e+"&brand["+i+"]="+$(this).parent().find('input[type="checkbox"]').val()}),""==e)var i=buildQueryString("brand","","page","1");else(i=buildQueryString("brand","","page","1")).indexOf("&filters=true")>0?(console.log(i),i=i.replace("&filters=true",e+"&filters=true")):i+=e;window.location.href=i}),$(".checkClick.cat").click(function(){var e="";if($(".checkClick.cat.active").each(function(i){e=e+"&cat["+i+"]="+$(this).parent().find('input[type="checkbox"]').val()}),console.log(e),""==e)i=buildQueryString("cat","","page","1");else{var i=buildQueryString("cat","","page","1");i+=e}window.location.href=i}),$(".checkClick.filter").click(function(){$(this).parent().parent();var e=window.location.href.split("&filters=true");if(e=e[0],$(".filter_group ul.check").find(".checkClick.filter.active").length>0&&(e+="&filters=true",$(".filter_group ul.check").each(function(){if($(this).find(".checkClick.filter.active").length>0){var i=$(this).data("id");e+="&"+i+"=";var t="";$(this).find(".checkClick.filter.active").each(function(){var e=$(this).parent().find("input[type='checkbox']").val();t+="-"+e+"-+"}),t=t.substring(0,t.length-1),e+=t}})),e.indexOf("&page=")>0){var i=e.split("&page=")[1].split("&");""!=i[0]&&(e=e.replace("&page="+i[0],"&page=1"))}console.log(e),window.location.href=e})});</script>